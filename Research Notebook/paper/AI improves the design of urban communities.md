# AI improves the design of urban communities

A reinforcement-learning-based framework is proposed for assisting urban planners in the complex task of optimizing the spatial design of urban communities.

本文提出了一个基于强化学习的框架协助城市规划者完成优化城市社区空间设计这一复杂任务。

Urban planning and design can be better described as a process than a task: design and planning decisions need to be integrated with political guidelines, societal goals and different types of constraints, and discussed with community stakeholders, typically across several iterations. Computational tasks, related for instance to spatial allocation of land use and facilities, are only a small part of the process — yet one of the most time-consuming. In urban planning practice, a solution that might look optimal from a quantitative and optimization viewpoint might be less preferable than another one that is maybe quantitatively suboptimal but more acceptable for the local community. In fact, the outcome of a planning task is not merely an allocation of space to buildings, parks and functions, but the design of a place where urban communities will live, work, interact and, hopefully, thrive for a very long time. Writing in Nature Computational Science, Yu Zheng and colleagues1 propose tackling this problem with the help of artificial intelligence (AI). How can AI help and assist urban planners and local communities in this process? Even if we restrict the focus of AI to the specific task of spatial land use and road layout, the application of AI methods needs to deal with the irregularity in the land and road layout, which makes the problem more challenging than well-known applications of AI to other spatial decision-making tasks such as the game of Go2 and chip design3.

城市规划和设计与其说是一项任务，不如说是一个过程：设计和规划决策需要与政治方针、社会目标和不同类型的限制因素相结合，并与社区利益相关者进行讨论，通常需要经过多次反复。与土地使用和设施的空间分配等相关的计算任务只是整个过程的一小部分，但却是最耗时的部分之一。在城市规划实践中，一个从定量和优化角度看可能是最优的解决方案，可能不如另一个从定量角度看可能是次优但更能为当地社区所接受的解决方案。事实上，规划任务的结果不仅仅是为建筑、公园和功能分配空间，而是设计一个城市社区将在其中生活、工作、互动的地方，并希望在很长一段时间内繁荣昌盛。Yu Zheng 及其同事1 在《自然-计算科学》（Nature Computational Science）杂志上撰文，建议借助人工智能（AI）来解决这一问题。在这一过程中，人工智能如何帮助和协助城市规划者和当地社区？即使我们将人工智能的重点限制在空间土地利用和道路布局的特定任务上，**人工智能方法的应用也需要处理土地和道路布局的不规则性，这使得该问题比众所周知的人工智能在其他空间决策任务（如围棋2 和芯片设计3）中的应用更具挑战性**。

![[AI-assisted urban planning process..webp]]

>图 1：人工智能辅助的城市规划流程。

上图：城市规划过程是一个迭代过程，其中空间规划的定量优化步骤被整合到需要构思、与政策和当地利益相关者互动、公众参与以及对所获规划进行全面评估的步骤中。

下图：Zheng 等人提出的人工智能辅助空间规划框架1。空间规划问题被转化为动态城市毗连图（UCG）上的马尔可夫决策过程（MDP）。通过图神经网络（GNN）状态编码器，UCG 中的信息与神经网络交换，神经网络用于约束 MDP 的行动空间（土地政策和道路政策网络）以及评估当前的布局状况（价值网络）。

To address the spatial irregularity challenge, Zheng et al. introduced a theoretical framework for translating the computational task of spatial layout planning into a sequential Markov decision process and solving it using reinforcement learning. One of the key elements of the framework is the notion of the urban contiguity graph (UCG), which expresses the topological relationships between the elements of a spatial layout, namely land plots, road segments and junctions. Hence, potential irregularities in the spatial elements are abstracted into a model that accounts only for their topological and proximity relationships. As planning decisions are made (for instance, introducing a new road), the topological relationships between the urban elements modeled in the UCG evolve to reflect such decisions. The spatial layout planning problem can then be formulated as a sequential decision making process on a dynamic graph. As decisions are taken at each step, the current layout is evaluated through a reward function that accounts for three metrics related to access to basic services (service), access to parks (ecology) and efficiency of the road network (traffic).

为了应对空间不规则性的挑战，Zheng 等人提出了一个理论框架，将空间布局规划的计算任务转化为一个连续的马尔可夫决策过程，并利用强化学习来解决这一问题。该框架的关键要素之一是城市连续图（UCG）的概念，它表达了空间布局元素（即地块、路段和路口）之间的拓扑关系。因此，空间元素中潜在的不规则性被抽象为一个模型，只考虑其拓扑和邻近关系。随着规划决策的做出（例如，引入一条新的道路），UCG 中建模的城市元素之间的拓扑关系也会发生变化，以反映这些决策。这样，空间布局规划问题就可以表述为动态图上的一个连续决策过程。在每一步做出决策时，都会通过一个奖励函数对当前布局进行评估，该函数考虑了与获得基本服务（服务）、获得公园（生态）和道路网络效率（交通）相关的三个指标。

With the challenge related to spatial irregularity addressed, the spatial layout design problem is still far from being solved. To steer the sequential decision-making process, the AI approach needs to explore a vast search space, through an even wider action space that comprises about 4,000100 actions even for a moderate-sized com- munity of a few square kilometers. Without a strategy for shrinking such exploration spaces, the number of iterations needed to converge to a good solution would be prohibitive and impair the feasibility of the proposed framework. To tackle this computational challenge, the authors use different types of neural networks to constraint the action space for land and road layout decisions (the policy networks), and a value network to judge current planning situations and predict planning performance. The policy and value networks exchange and use the information embedded in the UCG through a graph neural network (GNN) state encoder.

在解决了空间不规则性问题之后，空间布局设计问题仍远未解决。为了引导顺序决策过程，人工智能方法需要探索广阔的搜索空间，即使对于几平方公里的中等规模社区来说，也需要通过更广阔的行动空间来探索约 4000100 个行动。如果没有缩小这种探索空间的策略，收敛到一个好的解决方案所需的迭代次数就会过多，从而影响所建议框架的可行性。为了解决这一计算难题，作者使用不同类型的神经网络来限制土地和道路布局决策的行动空间（政策网络），并使用价值网络来判断当前的规划情况并预测规划绩效。政策网络和价值网络通过图神经网络（GNN）状态编码器交换和使用嵌入 UCG 的信息。

Thanks to this deep reinforcement-learning-based architecture (Fig. 1), the authors show that AI-assisted spatial land and road layout outperforms layouts produced by human experts with respect to all considered metrics (services, ecology and traffic) by nearly 50%. 

得益于这种基于深度强化学习的架构（图 1），作者表明，在所有考虑的指标（服务、生态和交通）方面，人工智能辅助的空间土地和道路布局优于人类专家的布局近 50%。

Despite these results, the authors acknowledge the nuisances of the urban planning process and by no means advocate for replacing human planners with AI. Rather, they suggest an integrated human–AI model for spatial planning, where human experts generate conceptual plans using centers and axes (task 1), which are then fed to AI spatial layout models for quantitative optimization (task 2), and finally are reviewed and adjusted by human experts (task 3). The authors claim that such an integrated workflow might reduce — by as much as a factor of 3,000 — the time needed for task 2 as compared with a fully human workflow. With AI, human planners can be liberated from computationally intensive, multi-objective quantitative tasks and focus entirely on the more nuanced and inherently human tasks related to conceptualization and comprehensive evaluation. The authors corroborate such an important claim with carefully designed experiments involving human planners, which show that the integrated human–AI framework can achieve Pareto optimal solutions in service and ecology, improving their efficiency by 12% and 5% with respect to a fully human workflow, while abating the time needed to build such solutions.

尽管取得了这些成果，但作者承认城市规划过程中存在一些弊端，绝不主张用人工智能取代人类规划师。相反，他们建议在空间规划中采用人机一体化模式，即由人类专家利用中心和轴线生成概念规划（任务 1），然后将其输入人工智能空间布局模型进行定量优化（任务 2），最后由人类专家进行审核和调整（任务 3）。作者称，与完全由人工完成的工作流程相比，这种综合工作流程可将任务 2 所需的时间减少多达 3000 倍。有了人工智能，人类规划人员就可以从计算密集型多目标定量任务中解放出来，完全专注于与概念化和综合评估相关的更细微、更人性化的任务。作者通过精心设计的人类规划者实验证实了这一重要主张，实验表明，人类-人工智能集成框架可以在服务和生态学领域实现帕累托最优解决方案，与完全由人类完成的工作流程相比，效率分别提高了 12% 和 5%，同时缩短了构建此类解决方案所需的时间。

While addressing important conceptual and computational challenges and demonstrating the feasibility of an integrated human–AI workflow for spatial layout planning, the work of Zheng et al. leaves many avenues open for future research. Although the authors demonstrate that their proposed framework displays transfer learning and some scaling features, they argue that extending the use of AI to the spatial design of an entire city is still an open challenge. The challenge is not only related to computational issues, but also to the fact that a city can be described as a complex system formed of intertwined subsystems, where changes affecting one subsystem might have unexpected consequences in another part of the city. For instance, it has been observed that the recent 15-minute city concept in urban plan- ning4, which is motivated by the idea of promoting short-range active mobility and vibrant local neighborhoods, might have the unexpected consequence of exacerbating social segregation5. Whether AI can assist urban planners also in identifying such unexpected consequences of urban planning is another open question.

Zheng 等人的工作解决了重要的概念和计算挑战，并展示了空间布局规划中人与人工智能集成工作流的可行性，但同时也为未来研究留下了许多途径。虽然作者证明了他们提出的框架具有迁移学习和一些扩展功能，但他们认为，将人工智能的应用扩展到整个城市的空间设计仍然是一个开放的挑战。这一挑战不仅与计算问题有关，还与城市可被描述为由相互交织的子系统组成的复杂系统这一事实有关，其中影响一个子系统的变化可能会给城市的另一部分带来意想不到的后果。例如，最近在城市规划中提出的 "15 分钟城市 "概念4 ，其出发点是促进短距离的积极流动性和充满活力的本地社区，但它可能会带来意想不到的后果，即加剧社会隔离5。人工智能是否也能帮助城市规划者识别城市规划的这种意外后果，这是另一个有待解决的问题。

[AI improves the design of urban communities | Nature Computational Science](https://www.nature.com/articles/s43588-023-00515-1)