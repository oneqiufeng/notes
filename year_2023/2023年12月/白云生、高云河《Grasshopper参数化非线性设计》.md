## **一、公差及单位设置**

在工程学和设计中，"公差"（tolerance）是指允许的误差或偏差的范围。它在制造和设计过程中起着重要的作用，因为目前无法达到完全精确的生产或制造。因此，公差定义了某个尺寸、位置或特性可以偏离其理论值的允许范围。

例如，在制造一个零件时，设计师可能规定某个尺寸的公差为±0.1毫米。这意味着在生产过程中，该尺寸的实际值可以在理论值的上下0.1毫米范围内波动，并且仍然被认为是符合要求的。

在Grasshopper中，点、向量、平面等也是通过方程式计算得到的，两个点之间的距离经计算得到的结果可能是小数点后七八位，但实际结果只需要保留到小数点后两位即可，于是我们可以把精度值设置到小数点后两位，这个精度值就叫做“公差”，我们一般把公差设为0.01或0.001。

Grasshopper所使用的公差和单位会自动遵循当前Rhino软件的设置。如果Rhino中的单位设置为米，那么在GH中所有的参数单位也将默认为米。但如果在操作过程中将Rhino中的单位改为毫米，那么GH中的单位也会相应变为毫米。此时，如果需要保持长度不变，就必须将所有数据乘以1000。

为了更改GH的公差和单位，可以前往Rhino中的[工具] -> [选项] -> [单位]设置。在那里，可以调整GH的公差并指定所需的单位。请注意，修改单位可能会对整个模型产生影响，所以在更改模型单位时务必格外小心。图1中展示了在Rhino中找到[工具一选项一单位]设置的位置。

图1

## **二、曲面及其操作**

在三维几何学和曲面建模中，曲面通常用参数方程来表示。对于大多数曲面，需要两个参数来定义表面上的点，这两个参数通常称为U方向和V方向。

·U方向：U方向是曲面上的一条曲线，类似于经度线。当沿着U方向移动时，可以在曲面上获得一条曲线，该曲线与曲面的主曲率方向相切。简单来说，U方向是曲面上的一条水平线。

·V方向：V方向是曲面上的另一条曲线，类似于纬度线。当沿着V方向移动时，可以在曲面上获得一条曲线，该曲线与U方向的曲线垂直相交。简单来说，V方向是曲面上的一条垂直线。

当对曲面进行 Reparameterize（参数重定义）后，U方向和V方向的定义域都会被映射到0至1的区间内。这样，曲面上的任意一点都可以通过0至1内的两个数值来表示，这两个数值构成了曲面的UV坐标点（UV Point）。

通过这种重新定义参数的方式，可以将原始曲面的参数空间转换为标准化的0至1区间，从而方便进行曲面上的各种计算和操作。在UV坐标点上，可以对曲面进行几何操作、纹理映射、曲面分析等处理，而无需考虑原始曲面的实际参数范围。

如图2所示，可以使用 EvaluateSurface（求值曲面）运算器来获取U、V坐标对应曲面上的点。同时，该运算器的输出端N表示点在曲面上的法线方向，输出端F表示通过该点垂直于曲面法线方向的平面。通过 ISo Curve（等参数曲线）运算器，您可以计算通过对应点的两个方向的等参数曲线。

图2

使用EvaluateSurface运算器的过程如下：

1. 输入曲面和U、V坐标值，该运算器将返回曲面上对应U、V坐标的点。
    
2. 输出端N表示在该点处曲面的法线方向。
    
3. 输出端F表示通过该点且垂直于曲面法线方向的平面。
    

使用ISo Curve运算器的过程如下：

1. 输入曲面和参数值（例如U或V的特定值），该运算器将返回通过对应点的等参数曲线。
    
2. 通过调整参数值来获取不同方向的等参数曲线。
    

## **三、曲面操作示例**

(1) 如图3所示，在Rhino空间中绘制四条曲线，可以根据需要自行设置曲线的形态和位置。然后，使用Loft命令依据这四条曲线生成一个曲面。

(2) 使用Surface运算器将生成的曲面导入到Grasshopper中。然后，通过Divide Domain和Isotrim两个运算器对曲面进行细分，将其分成一定数量的子曲面。这些操作可以帮助更好地控制曲面的细分程度，从而进一步对曲面进行分析和处理。

图3

(3) 使用Area运算器确定每个子曲面的中心点，并通过Surface Closest Point计算这些中心点对应的曲面U、V坐标值。

(4) 使用Surface Curvature运算器可以测量曲面对应U、V坐标的曲率值，其中输出端G表示高斯曲率，输出端M表示平均曲率。将每个子曲面中心点对应的U、V坐标赋予Surface Curvature运算器的UV输入端，即可得到中点所对应的平均曲率。

(5) 将平均曲率的数值通过Bounds和Deconstruct Domain两个运算器计算出最小值和最大值。

(6) 使用Gradient Control运算器将平均曲率的数值进行颜色映射。

(7) 将渐变颜色通过Custom Preview运算器赋予对应的子曲面，这样就可以清楚地显示出全部嵌板曲率变化的趋势。

由此可见，Grasshopper的强大之处在于它的参数化设计能力。设计师们可以通过调整参数，快速生成多样化的设计方案，无需逐一手动修改。这不仅大幅提升了设计效率，还使得创意的探索变得更加自由。

_**参考书籍：**_

_**白云生、高云河《Grasshopper参数化非线性设计》**_

https://zhuanlan.zhihu.com/p/646534144